<% provide(:title, "Reading List")%>
<% provide(:meta_description, "Books that Paul Bogard is reading or has completed reading.")%>

<h1>Reading List</h1>

<% if logged_in? %>
  <div class="row">
    <div class="col-md-12">
      <%= link_to("Add new book", new_book_path, class: "btn btn-default", role: "button") %>
    </div>
  </div>
<% end %>

<% if @books.any? %>
  <table class="table table-striped">
  	<thead>
  		<tr>
  			<th class="reading-title">Title</th>
  			<th class="reading-author">Author</th>
        <% if logged_in? %>
          <th class="reading-edit"></th>
        <% end %>
  		</tr>
  	</thead>
  	<tbody>
      <% @books.each do |book| %>
        <tr>
          <td class="reading-title">
          	<% if book.amazon_link %>
          		<%= link_to book.title, book.amazon_link %>
          	<% else %>
          		<%= book.title %>
          	<% end %>
          	<% if book.subtitle %>
          		<br/><span><%= book.subtitle %></span>
          	<% end %>
          </td>
          <td class="reading-author"><%= book.author.gsub("\n", "<br/>").html_safe %></td>
          <% if logged_in? %>
            <td class="reading-edit">
              <%= link_to("<span class=\"glyphicon glyphicon-pencil\"></span>".html_safe, edit_book_path(book), title: "Edit #{book.title}") %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

<% else %>
  <p class="alert alert-info">There are no books on the reading list.</p>
<% end %>